<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="generator" content="rustdoc">
    <meta name="description" content="API documentation for the Rust `Authority` struct in crate `trust_dns`.">
    <meta name="keywords" content="rust, rustlang, rust-lang, Authority">

    <title>trust_dns::authority::Authority - Rust</title>

    <link rel="stylesheet" type="text/css" href="../../rustdoc.css">
    <link rel="stylesheet" type="text/css" href="../../main.css">

    
    
</head>
<body class="rustdoc">
    <!--[if lte IE 8]>
    <div class="warning">
        This old browser is unsupported and will most likely display funky
        things.
    </div>
    <![endif]-->

    

    <nav class="sidebar">
        
        <p class='location'><a href='../index.html'>trust_dns</a>::<wbr><a href='index.html'>authority</a></p><script>window.sidebarCurrent = {name: 'Authority', ty: 'struct', relpath: ''};</script><script defer src="sidebar-items.js"></script>
    </nav>

    <nav class="sub">
        <form class="search-form js-only">
            <div class="search-container">
                <input class="search-input" name="search"
                       autocomplete="off"
                       placeholder="Click or press ‘S’ to search, ‘?’ for more options…"
                       type="search">
            </div>
        </form>
    </nav>

    <section id='main' class="content struct">
<h1 class='fqn'><span class='in-band'>Struct <a href='../index.html'>trust_dns</a>::<wbr><a href='index.html'>authority</a>::<wbr><a class='struct' href=''>Authority</a></span><span class='out-of-band'><span id='render-detail'>
            <a id="toggle-all-docs" href="javascript:void(0)" title="collapse all docs">
                [<span class='inner'>&#x2212;</span>]
            </a>
        </span><a id='src-3604' class='srclink' href='../../src/trust_dns/src/authority/authority.rs.html#47-59' title='goto source code'>[src]</a></span></h1>
<pre class='rust struct'>pub struct Authority {
    // some fields omitted
}</pre><div class='docblock'><p>Authority is the storage method for all resource records</p>
</div><h2 id='methods'>Methods</h2><h3 class='impl'><code>impl <a class='struct' href='../../trust_dns/authority/struct.Authority.html' title='trust_dns::authority::Authority'>Authority</a></code></h3><div class='docblock'><p>Authority is responsible for storing the resource records for a particular zone.</p>

<p>Authorities default to DNSClass IN. The ZoneType specifies if this should be treated as the
start of authority for the zone, is a slave, or a cached zone.</p>
</div><div class='impl-items'><h4 id='method.new' class='method'><code>fn <a href='#method.new' class='fnname'>new</a>(origin: <a class='struct' href='../../trust_dns/rr/domain/struct.Name.html' title='trust_dns::rr::domain::Name'>Name</a>, records: <a class='struct' href='https://doc.rust-lang.org/nightly/std/collections/hash/map/struct.HashMap.html' title='std::collections::hash::map::HashMap'>HashMap</a>&lt;<a class='struct' href='../../trust_dns/authority/struct.RrKey.html' title='trust_dns::authority::RrKey'>RrKey</a>, <a class='struct' href='../../trust_dns/authority/struct.RRSet.html' title='trust_dns::authority::RRSet'>RRSet</a>&gt;, zone_type: <a class='enum' href='../../trust_dns/authority/enum.ZoneType.html' title='trust_dns::authority::ZoneType'>ZoneType</a>, allow_update: <a class='primitive' href='https://doc.rust-lang.org/nightly/std/primitive.bool.html'>bool</a>) -&gt; <a class='struct' href='../../trust_dns/authority/struct.Authority.html' title='trust_dns::authority::Authority'>Authority</a></code></h4>
<div class='docblock'><p>Creates a new Authority.</p>

<h1 id='arguments' class='section-header'><a href='#arguments'>Arguments</a></h1>
<ul>
<li><code>origin</code> - The zone <code>Name</code> being created, this should match that of the <code>RecordType::SOA</code>
         record.</li>
<li><code>records</code> - The <code>HashMap</code> of the initial set of records in the zone.</li>
<li><code>zone_type</code> - The type of zone, i.e. is this authoritative?</li>
<li><code>allow_update</code> - If true, then this zone accepts dynamic updates.</li>
</ul>

<h1 id='return-value' class='section-header'><a href='#return-value'>Return value</a></h1>
<p>The new <code>Authority</code>.</p>
</div><h4 id='method.add_secure_key' class='method'><code>fn <a href='#method.add_secure_key' class='fnname'>add_secure_key</a>(&amp;mut self, signer: <a class='struct' href='../../trust_dns/rr/dnssec/struct.Signer.html' title='trust_dns::rr::dnssec::Signer'>Signer</a>)</code></h4>
<h4 id='method.get_origin' class='method'><code>fn <a href='#method.get_origin' class='fnname'>get_origin</a>(&amp;self) -&gt; &amp;<a class='struct' href='../../trust_dns/rr/domain/struct.Name.html' title='trust_dns::rr::domain::Name'>Name</a></code></h4>
<h4 id='method.get_zone_type' class='method'><code>fn <a href='#method.get_zone_type' class='fnname'>get_zone_type</a>(&amp;self) -&gt; <a class='enum' href='../../trust_dns/authority/enum.ZoneType.html' title='trust_dns::authority::ZoneType'>ZoneType</a></code></h4>
<h4 id='method.get_soa' class='method'><code>fn <a href='#method.get_soa' class='fnname'>get_soa</a>(&amp;self, is_secure: <a class='primitive' href='https://doc.rust-lang.org/nightly/std/primitive.bool.html'>bool</a>) -&gt; <a class='enum' href='https://doc.rust-lang.org/nightly/core/option/enum.Option.html' title='core::option::Option'>Option</a>&lt;&amp;<a class='struct' href='../../trust_dns/rr/resource/struct.Record.html' title='trust_dns::rr::resource::Record'>Record</a>&gt;</code></h4>
<h4 id='method.get_ns' class='method'><code>fn <a href='#method.get_ns' class='fnname'>get_ns</a>(&amp;self, is_secure: <a class='primitive' href='https://doc.rust-lang.org/nightly/std/primitive.bool.html'>bool</a>) -&gt; <a class='enum' href='https://doc.rust-lang.org/nightly/core/option/enum.Option.html' title='core::option::Option'>Option</a>&lt;<a class='struct' href='https://doc.rust-lang.org/nightly/collections/vec/struct.Vec.html' title='collections::vec::Vec'>Vec</a>&lt;&amp;<a class='struct' href='../../trust_dns/rr/resource/struct.Record.html' title='trust_dns::rr::resource::Record'>Record</a>&gt;&gt;</code></h4>
<h4 id='method.upsert' class='method'><code>fn <a href='#method.upsert' class='fnname'>upsert</a>(&amp;mut self, record: <a class='struct' href='../../trust_dns/rr/resource/struct.Record.html' title='trust_dns::rr::resource::Record'>Record</a>, serial: <a class='primitive' href='https://doc.rust-lang.org/nightly/std/primitive.u32.html'>u32</a>) -&gt; <a class='primitive' href='https://doc.rust-lang.org/nightly/std/primitive.bool.html'>bool</a></code></h4>
<div class='docblock'><p>Inserts or updates a <code>Record</code> depending on it&#39;s existence in the authority.</p>

<p>Guarantees that SOA, CNAME only has one record, will implicitly update if they already exist.</p>

<h1 id='arguments-1' class='section-header'><a href='#arguments-1'>Arguments</a></h1>
<ul>
<li><code>record</code> - The <code>Record</code> to be inserted or updated.</li>
<li><code>serial</code> - Current serial number to be recorded against updates.</li>
</ul>

<h1 id='return-value-1' class='section-header'><a href='#return-value-1'>Return value</a></h1>
<p>Ok() on success or Err() with the <code>ResponseCode</code> associated with the error.</p>
</div><h4 id='method.update' class='method'><code>fn <a href='#method.update' class='fnname'>update</a>(&amp;mut self, update: &amp;<a class='trait' href='../../trust_dns/op/message/trait.UpdateMessage.html' title='trust_dns::op::message::UpdateMessage'>UpdateMessage</a>) -&gt; <a class='type' href='../../trust_dns/authority/type.UpdateResult.html' title='trust_dns::authority::UpdateResult'>UpdateResult</a>&lt;<a class='primitive' href='https://doc.rust-lang.org/nightly/std/primitive.bool.html'>bool</a>&gt;</code></h4>
<div class='docblock'><p>Takes the UpdateMessage, extracts the Records, and applies the changes to the record set.</p>

<pre><code class="language-text">RFC 2136                       DNS Update                     April 1997

3.4 - Process Update Section

  Next, the Update Section is processed as follows.

3.4.2 - Update

  The Update Section is parsed into RRs and these RRs are processed in
  order.

3.4.2.1. If any system failure (such as an out of memory condition,
  or a hardware error in persistent storage) occurs during the
  processing of this section, signal SERVFAIL to the requestor and undo
  all updates applied to the zone during this transaction.

3.4.2.2. Any Update RR whose CLASS is the same as ZCLASS is added to
  the zone.  In case of duplicate RDATAs (which for SOA RRs is always
  the case, and for WKS RRs is the case if the ADDRESS and PROTOCOL
  fields both match), the Zone RR is replaced by Update RR.  If the
  TYPE is SOA and there is no Zone SOA RR, or the new SOA.SERIAL is
  lower (according to [RFC1982]) than or equal to the current Zone SOA
  RR&#39;s SOA.SERIAL, the Update RR is ignored.  In the case of a CNAME
  Update RR and a non-CNAME Zone RRset or vice versa, ignore the CNAME
  Update RR, otherwise replace the CNAME Zone RR with the CNAME Update
  RR.

3.4.2.3. For any Update RR whose CLASS is ANY and whose TYPE is ANY,
  all Zone RRs with the same NAME are deleted, unless the NAME is the
  same as ZNAME in which case only those RRs whose TYPE is other than
  SOA or NS are deleted.  For any Update RR whose CLASS is ANY and
  whose TYPE is not ANY all Zone RRs with the same NAME and TYPE are
  deleted, unless the NAME is the same as ZNAME in which case neither
  SOA or NS RRs will be deleted.

3.4.2.4. For any Update RR whose class is NONE, any Zone RR whose
  NAME, TYPE, RDATA and RDLENGTH are equal to the Update RR is deleted,
  unless the NAME is the same as ZNAME and either the TYPE is SOA or
  the TYPE is NS and the matching Zone RR is the only NS remaining in
  the RRset, in which case this Update RR is ignored.

3.4.2.5. Signal NOERROR to the requestor.
</code></pre>

<h1 id='arguments-2' class='section-header'><a href='#arguments-2'>Arguments</a></h1>
<ul>
<li><code>update</code> - The <code>UpdateMessage</code> records will be extracted and used to perform the update
         actions as specified in the above RFC.</li>
</ul>

<h1 id='return-value-2' class='section-header'><a href='#return-value-2'>Return value</a></h1>
<p>true if any of additions, updates or deletes were made to the zone, false otherwise. Err is
 returned in the case of bad data, etc.</p>
</div><h4 id='method.lookup' class='method'><code>fn <a href='#method.lookup' class='fnname'>lookup</a>(&amp;self, name: &amp;<a class='struct' href='../../trust_dns/rr/domain/struct.Name.html' title='trust_dns::rr::domain::Name'>Name</a>, rtype: <a class='enum' href='../../trust_dns/rr/record_type/enum.RecordType.html' title='trust_dns::rr::record_type::RecordType'>RecordType</a>, is_secure: <a class='primitive' href='https://doc.rust-lang.org/nightly/std/primitive.bool.html'>bool</a>) -&gt; <a class='enum' href='https://doc.rust-lang.org/nightly/core/option/enum.Option.html' title='core::option::Option'>Option</a>&lt;<a class='struct' href='https://doc.rust-lang.org/nightly/collections/vec/struct.Vec.html' title='collections::vec::Vec'>Vec</a>&lt;&amp;<a class='struct' href='../../trust_dns/rr/resource/struct.Record.html' title='trust_dns::rr::resource::Record'>Record</a>&gt;&gt;</code></h4>
<div class='docblock'><p>Looks up all Resource Records matching the giving <code>Name</code> and <code>RecordType</code>.</p>

<h1 id='arguments-3' class='section-header'><a href='#arguments-3'>Arguments</a></h1>
<ul>
<li><code>name</code> - The <code>Name</code>, label, to lookup.</li>
<li><code>rtype</code> - The <code>RecordType</code>, to lookup. <code>RecordType::ANY</code> will return all records matching
        <code>name</code>. <code>RecordType::AXFR</code> will return all record types except <code>RecordType::SOA</code>
        due to the requirements that on zone transfers the <code>RecordType::SOA</code> must both
        preceed and follow all other records.</li>
<li><code>is_secure</code> - If the DO bit is set on the EDNS OPT record, then return RRSIGs as well.</li>
</ul>

<h1 id='return-value-3' class='section-header'><a href='#return-value-3'>Return value</a></h1>
<p>None if there are no matching records, otherwise a <code>Vec</code> containing the found records.</p>
</div><h4 id='method.sign_zone' class='method'><code>fn <a href='#method.sign_zone' class='fnname'>sign_zone</a>(&amp;mut self)</code></h4>
<div class='docblock'><p>Signs any records in the zone that have serial numbers greater than or equal to <code>serial</code></p>

<h1 id='arguments-4' class='section-header'><a href='#arguments-4'>Arguments</a></h1>
<ul>
<li><code>serial</code> - The serial to which the serial number of an <code>RRSet</code> should be compared. If the
         record set serial is greater than or equal to the <code>serial</code>, then it will be
         resigned.</li>
</ul>
</div></div></section>
    <section id='search' class="content hidden"></section>

    <section class="footer"></section>

    <aside id="help" class="hidden">
        <div>
            <h1 class="hidden">Help</h1>

            <div class="shortcuts">
                <h2>Keyboard Shortcuts</h2>

                <dl>
                    <dt>?</dt>
                    <dd>Show this help dialog</dd>
                    <dt>S</dt>
                    <dd>Focus the search field</dd>
                    <dt>&larrb;</dt>
                    <dd>Move up in search results</dd>
                    <dt>&rarrb;</dt>
                    <dd>Move down in search results</dd>
                    <dt>&#9166;</dt>
                    <dd>Go to active search result</dd>
                </dl>
            </div>

            <div class="infos">
                <h2>Search Tricks</h2>

                <p>
                    Prefix searches with a type followed by a colon (e.g.
                    <code>fn:</code>) to restrict the search to a given type.
                </p>

                <p>
                    Accepted types are: <code>fn</code>, <code>mod</code>,
                    <code>struct</code>, <code>enum</code>,
                    <code>trait</code>, <code>type</code>, <code>macro</code>,
                    and <code>const</code>.
                </p>

                <p>
                    Search functions by type signature (e.g.
                    <code>vec -> usize</code> or <code>* -> vec</code>)
                </p>
            </div>
        </div>
    </aside>

    

    <script>
        window.rootPath = "../../";
        window.currentCrate = "trust_dns";
        window.playgroundUrl = "";
    </script>
    <script src="../../jquery.js"></script>
    <script src="../../main.js"></script>
    
    <script defer src="../../search-index.js"></script>
</body>
</html>